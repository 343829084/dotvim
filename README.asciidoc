= dotvim

个人使用的vim配置文件。本文档主要描述配置文件的安装和更新方法。

== 安装

. 从++github.com++上clone到本地

** Linux下
+
[source,sh]
----
git clone --recursive https://github.com/thawk/dotvim.git ~/.vim
----

** Windows下使用++TortoiseGit++工具
+
在资源管理器上，右键菜单中，选择++Git clone...++，记得选中++Recursive++选项，这样就可以把++NeoBundle.vim++也一并安装好。
+
NOTE: 在Windows下，clone到++\~/vimfiles++会比clone到++~/.vim++更加方便。

. 让vim使用我们的配置文件
+
vim缺省会使用++\~/.vimrc++（Windows下使用++~/_vimrc++）配置文件。由于该文件在git管理的范围外，不方便管理，因此可以将通过该文件来调用真正的配置文件（++\~/.vim/vimrc++或++~/vimfiles/vimrc++）：

** Linux下
+
运行++bootstrap.sh++，将会建立++~/.vimrc++，并且会建立++~/.vimrc.local++文件

** Windows下
+
建立++~/_vimrc++，内容如下：
+
----
runtime vimrc
----
+
把++vimrc.local.sample++拷贝一份到++~++下，改名为++vimrc.local++

** 如果vim目录不放在++\~/.vimrc++或++\~/vimfiles++，需要设置++runtimepath++路径，如
+
----
set runtimepath^=d:/vimconfig
set runtimepath+=d:/vimconfig/after
source d:/vimconfig/vimrc
----

. 运行vim程序，在vim中运行下面的命令以安装其余插件：
+
----
:NeoBundleInstall
----
+
由于插件数量比较多，因此可能需要较长的时间。

. 至此，所有配置均已完成，可以开始体验vim了。

== 插件选择

本配置中的插件按用途进行了分组，并可以通过++vimrc.local++文件进行启用及禁用。

缺省禁用了与开发相关的一些插件，可以按需要选择性启用。

== 配置升级

本配置会不定期进行维护、改进，需要的话可以通过下面的步骤更新vim配置文件：

. 更新基本vim配置
+
vim的基本配置和所要安装的插件信息都存放在++vimrc++文件中，因此需要先进行更新，再更新其余的插件。
+
** Linux下在++~/.vim++下运行++git pull++即可。
** Windows下可以在++~/vimfiles++目录上右键，选择++Git Pull...++进行更新。

. 清理不再使用的插件
+
可以通过注释++vimrc++中以++NeoBundle++开头的行来达到禁用插件的目的。被禁用的插件不会被vim载入，但还会保留在硬盘上。如果需要的话，可以在vim中运行下面的命令以从硬盘中删除被禁用的插件：
+
----
:NeoBundleClean
----

. 升级已有插件，安装新插件
+
可以在vim中运行下面的命令，升级已有插件（会同时安装缺失的插件）：
+
----
:NeoBundleUpdate
----
+
由于上面的命令会检查所有已安装插件的更新情况，可能需要比较长的时间。如果只想安装缺失的插件，不想更新已有插件，可以运行下面的命令：
+
----
:NeoBundleInstall
----

== 快捷键

参照 link:http://spacemacs.org/[spacemacs] 风格进行快捷键设置，将快捷键按功能分组而不是按插件分组，更便于记忆。

NOTE: ``<Leader>``是``<Space>``。

=== 搜索和符号查找 `<Leader>s`

.CtrlSF

[options="header"]
|===
| 快捷键      | 用途                       | 所属插件
| <Leader>sfp | 项目目录下CtrlSF           | ctrlsf.vim
| <Leader>sfP | 项目目录下CtrlSF当前词     | ctrlsf.vim
| <Leader>sff | 当前文件目录下CtrlSF       | ctrlsf.vim
| <Leader>sfF | 当前文件目录下CtrlSF当前词 | ctrlsf.vim
| <Leader>sfb | 当前目录下CtrlSF           | ctrlsf.vim
| <Leader>sfB | 当前目录下CtrlSF当前词     | ctrlsf.vim
|===

.Grep

[options="header"]
|===
| 快捷键     | 用途                         | 所属插件
| <Leader>/  | 在项目目录下进行搜索         | ack.vim
| <Leader>sp | 项目目录下进行搜索           | ack.vim
| <Leader>sP | 项目目录下进行搜索当前词     | ack.vim
| <Leader>sf | 当前文件目录下进行搜索       | ack.vim
| <Leader>sF | 当前文件目录下进行搜索当前词 | ack.vim
| <Leader>sb | 当前目录下进行搜索           | ack.vim
| <Leader>sB | 当前目录下进行搜索当前词     | ack.vim
|===

.Symbol

[options="header"]
|===
| 快捷键     | 用途                               | 所属插件
| <Leader>s] | 根据上下文进行跳转到定义或引用     | unite-gtags/jedi.vim
| <Leader>sr | 跳转到引用                         | unite-gtags/jedi.vim
| <Leader>sR | 跳转到当前词的引用                 | unite-gtags/jedi.vim
| <Leader>sd | 跳转到定义                         | unite-gtags/jedi.vim
| <Leader>sD | 跳转到当前词的定义                 | unite-gtags/jedi.vim
| <Leader>s/ | 列出当前文件中的符号               | unite-gtags
|===

=== 文档和帮助 `<Leader>h`

[options="header"]
|===
| 快捷键           | 用途                               | 所属插件
| <Leader>hdb      | describe bindings                  | unite.vim
| <Leader>hdc      | 显示当前字符的Unicode名称          | unicode.vim
| <Leader>hdf      | 列出所有vim函数                    | unite.vim
| <Leader>hdv      | 列出所有vim变量                    | unite.vim
| <Leader>h<Space> | 查找帮助                           | unite-help
| <Leader>hm       | 查找man pages                      | vim-ref
| <Leader>hM       | 查找man pages（当前word）          | vim-ref
| <Leader>ha       | 用apropos查找man pages             | unite-apropos
| <Leader>hA       | 用apropos查找man pages（当前word） | unite-apropos
|===

=== Resume/Rename/Registers `<Leader>r`

[options="header"]
|===
| 快捷键     | 用途                    | 所属插件
| <Leader>rl | 重新打开最近的Unite窗口 | unite.vim
| <Leader>rr | 将光标下的符号改名      | jedi.vim
// | <Leader>re | 列出kill-ring           | neoyank.vim
| <Leader>rm | 列出register            | unite.vim
| <Leader>ry | 列出kill-ring           | neoyank.vim
|===

=== 项目 `<Leader>p`

[options="header"]
|===
| 快捷键         | 用途                       | 所属插件
| <Leader>p'     | 在项目目录下打开shell      | vimshell
| <Leader>pf     | 在项目目录下找文件         | unite.vim
| <Leader>pd     | 在项目目录下找目录         | unite.vim
| <Leader>pD     | 在项目目录下打开文件浏览器 | vimfiler
| <Leader>pt     | 在项目目录下打开目录树     | vimfiler

| <Leader>pg     | 找项目中的tag              | unite-gtags
| <Leader>p<C-g> | 更新tags                   | gtags.vim

| <Leader>pc     | 编译构建                   | vim-dispatch
| <Leader>pC     | Clean                      | vim-dispatch
| <Leader>pT     | 执行测试                   | vim-dispatch

| <Leader>ps     | make stage                 | vim-dispatch
|===

=== 文件 `<Leader>f`

[options="header"]
|===
| 快捷键     | 用途                               | 所属插件
| <Leader>f` | 在当前文件目录打开shell            | vimshell
| <Leader>fb | 打开书签                           | unite.vim
| <Leader>ff | 在当前文件目录找文件               | unite.vim
| <Leader>fs | 保存当前文件                       | 内置
| <Leader>fS | 保存所有文件                       | 内置
| <Leader>fr | 打开recent文件                     | neomru.vim
// | <Leader>fl | 在当前文件目录找文件（纯文本） | unite.vim
| <Leader>ft | 在文件目录下打开目录树                         | vimfiler
| <Leader>fy | 显示当前文件的全路径               | 内置
| <Leader>fo | 打开文件的大纲                     | unite-outline
| <Leader>fO | 打开文件的Folding                  | unite-fold
| <Leader>fp | 查找项目中的路径和文件名           | unite-gtags
| <Leader>fP | 查找项目中匹配当前词的路径和文件名 | unite-gtags
| <Leader>f/ | 在当前文件中查找                   | unite.vim
|===

=== 缓冲区 `<Leader>b`

[options="header"]
|===
| 快捷键     | 用途                         | 所属插件
| <Leader>bb | 选择并切换缓冲区             | unite.vim
| <Leader>bd | 删除当前缓冲区               | 内置
| <Leader>bn | 打开下一缓冲区（:bnext）     | 内置
| <Leader>bp | 打开上一缓冲区（:bprevious） | 内置
| <Leader>bR | 重新载入当前文件（:e）       | 内置
| <Leader>bs | 打开或切换到scratch          | scratch.vim
| <Leader>bt | 在当前目录打开目录树         | scratch.vim
|===

=== 调试 `<Leader>d`

[options="header"]
|===
| 快捷键     | 用途                | 所属插件
| <Leader>db | 设置/切换断点       | Conque-GDB
| <Leader>dd | 删除断点            | Conque-GDB
| <Leader>dc | 继续运行，Continue  | Conque-GDB
| <Leader>dr | 开始运行，Run       | Conque-GDB
| <Leader>dn | 单步步过，Next      | Conque-GDB
| <Leader>ds | 单步进入，Step      | Conque-GDB
| <Leader>dp | 打印，Print         | Conque-GDB
| <Leader>df | 执行到返回，Finish  | Conque-GDB
| <Leader>dt | 打印堆栈，Backtrace | Conque-GDB
|===

=== 编译 `<Leader>c`

[options="header"]
|===
| 快捷键     | 用途 | 所属插件
| <Leader>cc | 编译 |
// | <Leader>cC | compile                      |
// | <Leader>cd | close compilation window     |
// | <Leader>ck | kill compilation             |
// | <Leader>cm | helm-make                    |
// | <Leader>cr | recompile                    |
|===

=== 文本Text相关 `<Leader>x`

[options="header"]
|===
| 快捷键      | 用途         | 所属插件
| <Leader>xa  | 对齐文本     | vim-easy-align

// | <Leader>xtc | 交换两个字符 | 内置
// | <Leader>xtw | 交换两个word | 内置
// | <Leader>xtl | 交换两行     | 内置
|===

=== 插入内容 `<Leader>i`

[options="header"]
|===
| 快捷键     | 用途                  | 所属插件
| <Leader>iu | 搜索并插入Unicode字符 | unite-unicode
| <Leader>is | 选择追加snippets | ultisnips
| <Leader>iS | 选择插入snippets | ultisnips
|===

=== 切换开关 `<Leader>t`

[options="header"]
|===
| 快捷键      | 用途                          | 所属插件
| <Leader>ti  | 是否高亮显示indentation guide | indentLine
| <Leader>ts  | 选择colorscheme               | unite-colorscheme
| <Leader>tha | 切换高亮当前词                |
|===

=== 窗口 `<Leader>w`

[options="header"]
|===
| 快捷键        | 用途                     | 所属插件
| <Leader><Tab> | 当前窗口切换为上一buffer | 内置
| <Leader>ww    | 切换到下一个窗口         | 内置
// | <Leader>wW    | 选择并切换窗口           |
|===

// === 注释 `<Leader>;`
//
// [options="header"]
// |===
// | 快捷键     | 用途          | 所属插件
// | <Leader>;  | 注释 operator | tcomment_vim
// | <Leader>;; | 注释当前行    | tcomment_vim
// |===

=== 错误处理 `<Leader>e`

[options="header"]
|===
| 快捷键     | 用途          | 所属插件
// | <Leader>el | 切换Syntastic | syntastic
| <Leader>en | 下一个错误    | 内置
| <Leader>ep | 上一个错误    | 内置
|===

// === vim配置文件 `<Leader>fe`
//
// [options="header"]
// |===
// | 快捷键      | 用途              | 所属插件
// | <Leader>fed | 打开vimrc文件     | 内置
// | <Leader>feR | 重新载入vimrc文件 | 内置
// |===

=== 版本控制git/svn `<Leader>g`

[options="header"]
|===
| 快捷键      | 用途                                             | 所属插件
| <Leader>ga  | 加入文件（VCAdd）                                | vc.vim
| <Leader>gb  | 查看每行的最后修改人（VCBlame）                  | vc.vim
| <Leader>gc  | 提交（VCCommit）                                 | vc.vim
| <Leader>gd  | 列出修改点（VCDiff）                             | vc.vim
| <Leader>gD  | 列出修改点（VCDiff!）                            | vc.vim
| <Leader>gh  | 文件历史（VCLog）                                | vc.vim
| <Leader>gi  | 文件历史（VCInfo）                               | vc.vim
| <Leader>gi  | 查看文件信息（VCInfo）                           | vc.vim
| <Leader>gs  | 查看整个库的状态（VCStatus）                     | vc.vim
| <Leader>gsp | 同<Leader>gs                                     | vc.vim
| <Leader>gsb | 查看当前目录的状态（VCStatus .）                 | vc.vim
| <Leader>gsq | （SVN）查看有哪些变化的文件（VCStatus -qu）      | vc.vim
| <Leader>gsu | （SVN）查看有哪些可以update的文件（VCStatus -u） | vc.vim
|===

=== 退出 `<Leader>q`

[options="header"]
|===
| 快捷键     | 用途                           | 所属插件
| <Leader>qq | 退出Vim（:qa）                 | 内置
| <Leader>qQ | 退出Vim（:qa!，放弃所有修改）  | 内置
| <Leader>qs | 并退出Vim（:xa，保存所有文件） | 内置
|===

=== 跳转 `<Leader>j`

[options="header"]
|===
| 快捷键     | 用途                     | 所属插件
| <Leader>jd | 在当前窗口打开文件浏览器 | vimfiler
| <Leader>jD | 在另一窗口打开文件浏览器 | vimfiler
| <Leader>jl | <Plug>(easymotion-bd-jk) | vim-easymotion
| <Leader>jw | <Plug>(easymotion-s2)    | vim-easymotion
| <Leader>j= | 格式化选区或整个buffer   | clang-format
|===

=== 代码跳转 `<Leader>mg`

[options="header"]
|===
| 快捷键      | 用途                       | 所属插件
| <Leader>mga | 在.h和.cpp间切换           | vim-fswitch
| <Leader>mgA | 在.h和.cpp间切换（新窗口） | vim-fswitch
// | <Leader>mgt | 切换到单元测试文件 |
|===

=== REPL `<Leader>ms`

小写保持焦点在当前缓冲区，大写切换到REPL窗口。

[options="header"]
|===
| 快捷键      | 用途           | 所属插件
| <Leader>msb | 发送整个缓冲区 | vimshell/slimux
| <Leader>msl | 发送当前行     | vimshell/slimux
| <Leader>msr | 发送选中内容   | vimshell/slimux
| <Leader>msq | 关闭           | vimshell/slimux
| <Leader>mse | 重复上一次     | slimux
|===

=== Unite `<Leader>u`

[options="header"]
|===
| 快捷键     | 用途                  | 所属插件
| <Leader>ur | 打开或关闭Unite窗口   | unite.vim
| <Leader>uc | 打开或关闭Unite窗口   | unite.vim
| <Leader>up | 跳到Unite窗口的上一项 | unite.vim
| <Leader>un | 跳到Unite窗口的下一项 | unite.vim
| <Leader>us | 列出所有Unite的源     | unite.vim
| <Leader>um | 列出message           | unite.vim
|===

=== 其它

[options="header"]
|===
| 快捷键     | 用途                       | 所属插件
| <Leader>?  | 列出可用的按键绑定         | unite.vim
| <Leader>au | UndotreeToggle             | undotree
| <Leader>j= | 格式化整个文件（mzgg=G`z） | 内置
|===

